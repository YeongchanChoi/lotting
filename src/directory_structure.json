{
    "__files__": {
        "api.js": "import axios from \"axios\";\nconst path = \"http://localhost:8080\"; //Immigrant\n\n//고객 추가 페이지 새로운 아이디 받아오기\nexport const newIdGenerate = () => {\n  return axios\n    .get(path + \"/customers/nextId\")\n    .then((result) => {\n      return result.data; // 백엔드에서 Integer를 반환하므로 result.data가 관리번호.\n    })\n    .catch((error) => {\n      console.error(error);\n      throw error;\n    });\n};\n//고객 추가 페이지 파일 저장 기능\n// 파일 업로드 기능\nexport const createFile = (file) => {\n  const formData = new FormData();\n  formData.append(\"file\", file); // 백엔드에서 기대하는 'file' 키 사용\n\n  return axios.post(path + \"/files/upload\", formData, {\n    headers: { \"Content-Type\": \"multipart/form-data\" },\n  });\n};\n\nexport const downloadFile = async (id, filename) => {\n  try {\n    const response = await axios.get(`${path}/files/download`, {\n      params: { id, filename }, // 'filename'은 이제 파일명만 포함\n      responseType: \"blob\", // 바이너리 데이터로 응답 받기\n    });\n\n    // 파일명 추출\n    const disposition = response.headers[\"content-disposition\"];\n    let fileName = \"downloaded_file\";\n    if (disposition && disposition.indexOf(\"filename=\") !== -1) {\n      const filenameRegex = /filename[^;=\\n]*=((['\"]).*?\\2|[^;\\n]*)/;\n      const matches = filenameRegex.exec(disposition);\n      if (matches != null && matches[1]) {\n        fileName = matches[1].replace(/['\"]/g, \"\");\n      }\n    }\n\n    // Blob의 MIME 타입을 설정하여 Blob 생성\n    const blob = new Blob([response.data], {\n      type: response.headers[\"content-type\"],\n    });\n    const url = window.URL.createObjectURL(blob);\n    const link = document.createElement(\"a\");\n    link.href = url;\n    link.setAttribute(\"download\", fileName);\n    document.body.appendChild(link);\n    link.click();\n    link.remove();\n    window.URL.revokeObjectURL(url);\n  } catch (error) {\n    console.error(\"Error downloading file:\", error);\n    throw error;\n  }\n};\n\n//고객 추가 페이지\nexport const createUser = (data) => {\n  return axios.post(path + \"/customers\", data);\n};\n\n//검색 페이지 유저 분류, 검색 기능\nexport const fetchCustomers = (params) => {\n  // params는 { name: '...', number: '...'} 형태\n  return axios\n    .get(`${path}/customers/search`, { params })\n    .then((response) => response.data)\n    .catch((error) => {\n      console.error(\"Error fetching customers:\", error);\n      throw error;\n    });\n};\n\n//검색 페이지 삭제 기능\nexport const deleteCustomer = (id) => {\n  return axios\n    .delete(`${path}/customers/${id}`)\n    .then((response) => response.data)\n    .catch((error) => {\n      console.error(\"Error deleting customer:\", error);\n      throw error;\n    });\n};\n\n//유저 상세 페이지 번호로 검색\nexport const fetchCustomerById = (id) => {\n  return axios\n    .get(`${path}/customers/${id}`)\n    .then((response) => response.data)\n    .catch((error) => {\n      console.error(\"Error fetching customer:\", error);\n      throw error;\n    });\n};\n\n//납부 전 차수들 데이터\nexport const fetchPendingPhases = async (userId) => {\n  try {\n    const response = await axios.get(\n      `${path}/customers/${userId}/pending-phases`\n    );\n    return response.data;\n  } catch (error) {\n    console.error(\"Error fetching pending phases:\", error);\n    throw error;\n  }\n};\n\n//납부 후 차수들 데이터\nexport const fetchCompletedPhases = async (userId) => {\n  try {\n    const response = await axios.get(\n      `${path}/customers/${userId}/completed-phases`\n    );\n    return response.data;\n  } catch (error) {\n    console.error(\"Error fetching completed phases:\", error);\n    throw error;\n  }\n};\n\n/**\n * 특정 사용자의 특정 차수(Phase) 데이터를 가져옵니다.\n * @param {number} userid - 사용자 ID\n * @param {number} chasu - 차수 번호\n * @returns {Promise<Object>} - Phase 데이터\n */\nexport const fetchPhaseData = (userid, chasu) => {\n  return axios\n    .get(`${path}/customers/${userid}/phases`)\n    .then((result) => {\n      const phases = result.data;\n      const phase = phases.find((p) => p.phaseNumber === parseInt(chasu, 10));\n      return phase;\n    })\n    .catch((error) => {\n      console.error(\"Error fetching phase data:\", error);\n      throw error;\n    });\n};\n\n/**\n * 특정 Phase를 업데이트합니다.\n * @param {number} phaseId - Phase ID\n * @param {Object} data - 업데이트할 데이터\n * @returns {Promise<Object>} - 업데이트된 Phase 데이터\n */\nexport const updatePhaseData = (phaseId, data) => {\n  return axios\n    .put(`${path}/phases/${phaseId}`, data)\n    .then((result) => result.data)\n    .catch((error) => {\n      console.error(\"Error updating phase data:\", error);\n      throw error;\n    });\n};\n\n/**\n * 특정 Phase를 업데이트합니다. (콜백 사용)\n * @param {number} phaseId - Phase ID\n * @param {Object} data - 업데이트할 데이터\n * @param {Function} callback - 업데이트 후 호출할 콜백 함수\n */\nexport const updatePhaseDataWithCallback = (phaseId, data, callback) => {\n  axios\n    .put(`${path}/phases/${phaseId}`, data)\n    .then(() => {\n      callback();\n    })\n    .catch((error) => {\n      console.error(\"Error updating phase data:\", error);\n    });\n};\n\n/**\n * 특정 사용자의 Loan 데이터를 가져옵니다.\n * @param {number} userid - 사용자 ID\n * @returns {Promise<Object>} - Loan 데이터\n */\nexport const fetchLoanInit = (userid) => {\n  return axios\n    .get(`${path}/customers/${userid}/loan`)\n    .then((result) => result.data)\n    .catch((error) => {\n      console.error(\"Error fetching loan data:\", error);\n      throw error;\n    });\n};\n\n/**\n * 특정 사용자의 Loan 데이터를 업데이트합니다.\n * @param {number} userid - 사용자 ID\n * @param {Object} data - 업데이트할 Loan 데이터\n * @param {Function} callback - 업데이트 후 호출할 콜백 함수\n */\nexport const fetchLoanUpdate = (userid, data, callback) => {\n  axios\n    .put(`${path}/customers/${userid}/loan`, data)\n    .then(() => {\n      callback();\n    })\n    .catch((error) => {\n      console.error(\"Error updating loan data:\", error);\n    });\n};\n\n// JWT 토큰을 포함한 요청을 위해 Axios 인터셉터 설정\naxios.interceptors.request.use(\n  (config) => {\n    const token = localStorage.getItem(\"token\"); // AuthContext에서 관리하는 토큰 사용\n    if (token) {\n      config.headers[\"Authorization\"] = `Bearer ${token}`;\n    }\n    return config;\n  },\n  (error) => {\n    return Promise.reject(error);\n  }\n);\n\nexport const fetchLogin = (username, password) => {\n  // 매니저 로그인\n  return axios.post(path + \"/api/auth/signin\", {\n    username,\n    password,\n  });\n};\n\nexport const fetchSignup = (username, email, password, roles) => {\n  // 매니저 회원가입\n  return axios.post(path + \"/api/auth/signup\", {\n    username,\n    email,\n    password,\n    roles,\n  });\n};\n\nexport const cancelCustomer = (id) => {\n  return axios\n    .put(`${path}/customers/${id}/cancel`)\n    .then((response) => response.data)\n    .catch((error) => {\n      console.error(\"Error cancelling customer:\", error);\n      throw error;\n    });\n};\n\n// 고객 정보 업데이트 기능\nexport const updateUser = (id, data) => {\n  return axios\n    .put(`${path}/customers/${id}`, data)\n    .then((response) => response.data)\n    .catch((error) => {\n      console.error(\"Error updating user:\", error);\n      throw error;\n    });\n};\n\n// 연체료 조회 페이지: 연체료 정보 가져오기\nexport const fetchLateFees = (name, number, token) => {\n  return axios\n    .get(`${path}/latefees`, {\n      params: {\n        name: name.length > 1 ? name : undefined,\n        number: number.length > 1 ? number : undefined,\n      },\n    })\n    .then((result) => result.data)\n    .catch((error) => {\n      console.error(\"Error fetching late fees:\", error);\n      throw error;\n    });\n};\n\n//=====================================================================================\n\nexport const searchFinchasu = (userid) => {\n  // Customer의 이미 납부된 Phase 불러오기\n  return axios\n    .get(path + \"/api/chasuinit/fin/\" + userid)\n    .then((result) => {\n      return result.data;\n    })\n    .catch((error) => {\n      console.error(error);\n      throw error;\n    });\n};\n\nexport const fetchNameSearch = (username) => {\n  //이름으로 Customer 찾기\n  return axios\n    .get(path + \"/api/searchname/\" + username)\n    .then((result) => {\n      return result.data;\n    })\n    .catch((error) => {\n      console.log(error);\n      throw error;\n    });\n};\n\nexport const fetchNumberSearch = (usernumber) => {\n  //회원번호로 Customer 찾기\n  return axios\n    .get(`${path}/api/searchnumber/${usernumber}`)\n    .then((result) => {\n      return result.data;\n    })\n    .catch((error) => {\n      console.log(error);\n      throw error;\n    });\n};\n\nexport const deleteUser = (id) => {\n  //Customer 삭제\n  return axios\n    .post(path + \"/api/deleteuser\", { id: id.toString() })\n    .then((result) => {\n      return result.data;\n    })\n    .catch((error) => {\n      console.error(\"Error deleting user:\", error);\n      throw error;\n    });\n};\n",
        "atom.js": "import { atom } from \"recoil\";\n\nexport const userinfoState = atom({\n    key: 'userinfoState',\n    default: null,\n});\n\nexport const useridState = atom({\n    key: 'useridState',\n    default: null,\n})\n\nexport const searchnameState = atom({\n    key: 'searchnameState',\n    default: \"\",\n})\n\nexport const searchnumberState = atom({\n    key: 'searchnumberState',\n    default: \"\",\n});\n\nexport const searchtypeState = atom({\n    key: 'searchtypeState',\n    default: null,\n});\n\nexport const usernewState = atom ({\n    key: 'usernewState',\n    default: null\n})\n\nexport const chasuState = atom ({\n    key: 'chasuState',\n    default: null\n})\n",
        "categoryMapping.js": "// src/utils/categoryMapping.js\n\nconst categoryMapping = {\n    1: \"정계약\",\n    c: \"청약\",\n    j: \"정계약\",\n    r: \"수정\",\n    x: \"해지\",\n    x1: \"해지\",\n    p: \"업대\",\n    p1: \"업대\",\n    t: \"창준위\",\n    t1: \"창준위\",\n    g: \"지주\",\n  };\n  \n  export default categoryMapping;\n  ",
        "selector.js": "import { selector } from \"recoil\";\nimport { fetchNameSearch, fetchNumberSearch, fetchT, fetchUserinfo, fetchLoanInit, fetchChasuData, fetchCustomers, fetchCustomerById, fetchPhaseData } from \"./api\";\nimport { searchnameState, searchnumberState, useridState, searchtypeState, chasuState } from \"./atom\";\n\n//유저 검색\nexport const userinfoSelector = selector({ \n  key: \"userinfoSelector\",\n  get: async ({ get }) => {\n    const userid = get(useridState);\n    if (!userid) {\n      return null;\n    }\n    try {\n      const data = await fetchCustomerById(userid);\n      return data;\n    } catch (error) {\n      console.error(\"userinfoSelector 오류:\", error);\n      throw error;\n    }\n  },\n});\n//유저 검색2\nexport const namesearchSelector = selector({\n  key: 'namesearchSelector',\n  get: async ({ get }) => {\n    const username = get(searchnameState);\n    const usernumber = get(searchnumberState);\n\n    try {\n      const params = {};\n      if (username) params.name = username;\n      if (usernumber) params.number = usernumber;\n\n      const data = await fetchCustomers(params);\n      return data;\n    } catch (error) {\n      console.error('namesearchSelector 오류:', error);\n      throw error;\n    }\n  },\n});\n\n\n/**\n * 사용자 대출 정보 셀렉터\n */\nexport const usermoneySelector = selector({\n  key: 'usermoneySelector',\n  get: async ({ get }) => {\n    const userid = get(useridState);\n    if (userid) {\n      try {\n        const data = await fetchLoanInit(userid);\n        return data;\n      } catch (error) {\n        console.error('Error fetching loan data: ', error);\n        throw error;\n      }\n    }\n    return null;\n  }\n});\n\n\n/**\n * 사용자 차수(Phase) 정보 셀렉터\n */\nexport const userchasuSelector = selector({\n  key: 'userchasuSelector',\n  get: async ({ get }) => {\n    const userid = get(useridState);\n    const chasu = get(chasuState);\n    if (userid && chasu) {\n      try {\n        const phase = await fetchPhaseData(userid, chasu);\n        return phase;\n      } catch (error) {\n        console.error('Error fetching phase data:', error);\n        throw error;\n      }\n    }\n    return null;\n  }\n});\n//=======================================================================================\n\n\n\n"
    },
    "context": {
        "__files__": {
            "AuthContext.js": "'use client'\nimport React, { createContext, useState, useEffect } from 'react';\n\nconst AuthContext = createContext();\n\nexport const AuthProvider = ({ children }) => {\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [username, setUsername] = useState('');\n\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    const user = localStorage.getItem('username');\n    if (token) {\n      setIsLoggedIn(true);\n      setUsername(user);\n    }\n  }, []);\n\n  const login = (username, token) => {\n    localStorage.setItem('token', token);\n    localStorage.setItem('username', username);\n    setIsLoggedIn(true);\n    setUsername(username);\n  };\n\n  const logout = () => {\n    localStorage.removeItem('token');\n    localStorage.removeItem('username');\n    setIsLoggedIn(false);\n    setUsername('');\n  };\n\n  return (\n    <AuthContext.Provider value={{ isLoggedIn, username, login, logout }}>\n      {children}\n    </AuthContext.Provider>\n  );\n};\n\nexport default AuthContext;\n"
        }
    },
    "hoc": {
        "__files__": {
            "withAuth.js": "// 'hoc/withAuth.js'\nimport { useEffect } from \"react\";\nimport { useRouter } from \"next/navigation\";\n\nconst withAuth = (WrappedComponent) => {\n  return (props) => {\n    const router = useRouter();\n\n    useEffect(() => {\n      const token = localStorage.getItem(\"token\");\n      if (!token) {\n        router.push(\"/login\");\n      }\n    }, []);\n\n    return <WrappedComponent {...props} />;\n  };\n};\n\nexport default withAuth;\n"
        }
    }
}